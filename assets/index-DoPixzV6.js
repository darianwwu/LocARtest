(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))l(o);new MutationObserver(o=>{for(const e of o)if(e.type==="childList")for(const t of e.addedNodes)t.tagName==="LINK"&&t.rel==="modulepreload"&&l(t)}).observe(document,{childList:!0,subtree:!0});function a(o){const e={};return o.integrity&&(e.integrity=o.integrity),o.referrerPolicy&&(e.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?e.credentials="include":o.crossOrigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function l(o){if(o.ep)return;o.ep=!0;const e=a(o);fetch(o.href,e)}})();document.addEventListener("DOMContentLoaded",()=>{console.log("DOM fully loaded and parsed");const s=document.getElementById("arrow");s?console.log("Arrow model found in DOM"):console.error("Arrow model not found in DOM");const n={latitude:51.935918,longitude:7.650877};"geolocation"in navigator?(console.log("Geolocation is supported"),navigator.geolocation.watchPosition(e=>{const{latitude:t,longitude:r}=e.coords;console.log(`User position updated: lat=${t}, lon=${r}`),a(t,r),l()},e=>console.error("Geolocation error:",e),{enableHighAccuracy:!0,maximumAge:0,timeout:5e3})):console.error("Geolocation not supported by this browser.");function a(e,t){const r=o(e,t,n.latitude,n.longitude);console.log(`Calculated bearing: ${r} degrees`),s.setAttribute("rotation",`0 ${r} 0`)}function l(e,t){console.log(`Updating arrow position: lat=${n.latitude}, lon=${n.longitude}`),s.setAttribute("gps-entity-place",`latitude: ${n.latitude}; longitude: ${n.longitude};`)}function o(e,t,r,g){const i=u=>u*Math.PI/180,f=u=>u*180/Math.PI,d=i(g-t),p=Math.sin(d)*Math.cos(i(r)),m=Math.cos(i(e))*Math.sin(i(r))-Math.sin(i(e))*Math.cos(i(r))*Math.cos(d);let c=f(Math.atan2(p,m));return c=(c+360)%360,console.log(`Bearing calculation result: ${c}`),c}});
