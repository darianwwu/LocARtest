(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))r(e);new MutationObserver(e=>{for(const a of e)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function p(e){const a={};return e.integrity&&(a.integrity=e.integrity),e.referrerPolicy&&(a.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?a.credentials="include":e.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(e){if(e.ep)return;e.ep=!0;const a=p(e);fetch(e.href,a)}})();document.addEventListener("DOMContentLoaded",()=>{console.log("DOM fully loaded and parsed");const d=document.getElementById("arrow"),i=document.getElementById("distance-display"),p=document.getElementById("radar-arrow");d?console.log("Arrow model found in DOM"):console.error("Arrow model not found in DOM");const r={latitude:51.935918,longitude:7.650877};"geolocation"in navigator?(console.log("Geolocation is supported"),navigator.geolocation.watchPosition(o=>{const{latitude:n,longitude:t}=o.coords;console.log(`User position updated: lat=${n}, lon=${t}`),e(n,t),a(),c(n,t),w(n,t)},o=>console.error("Geolocation error:",o),{enableHighAccuracy:!0,maximumAge:0,timeout:5e3})):console.error("Geolocation not supported by this browser.");function e(o,n){const t=M(o,n,r.latitude,r.longitude);console.log(`Calculated bearing: ${t} degrees`),d.setAttribute("rotation",`0 ${t} 0`)}function a(o,n){console.log(`Updating arrow position: lat=${r.latitude}, lon=${r.longitude}`),d.setAttribute("gps-entity-place",`latitude: ${r.latitude}; longitude: ${r.longitude};`)}function c(o,n){const t=D(o,n,r.latitude,r.longitude);console.log(`Distance to target: ${t} meters`),i.innerText=`Distance: ${t.toFixed(2)} m`}function w(o,n){const t=M(o,n,r.latitude,r.longitude);p.style.transform=`rotate(${t}deg)`}function M(o,n,t,h){const s=m=>m*Math.PI/180,u=m=>m*180/Math.PI,l=s(h-n),g=Math.sin(l)*Math.cos(s(t)),y=Math.cos(s(o))*Math.sin(s(t))-Math.sin(s(o))*Math.cos(s(t))*Math.cos(l);let f=u(Math.atan2(g,y));return f=(f+360)%360,console.log(`Bearing calculation result: ${f}`),f}function D(o,n,t,h){const u=(t-o)*(Math.PI/180),l=(h-n)*(Math.PI/180),g=Math.sin(u/2)*Math.sin(u/2)+Math.cos(o*(Math.PI/180))*Math.cos(t*(Math.PI/180))*Math.sin(l/2)*Math.sin(l/2);return 6371e3*(2*Math.atan2(Math.sqrt(g),Math.sqrt(1-g)))}});
