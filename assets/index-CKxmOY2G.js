(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))u(t);new MutationObserver(t=>{for(const n of t)if(n.type==="childList")for(const a of n.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&u(a)}).observe(document,{childList:!0,subtree:!0});function g(t){const n={};return t.integrity&&(n.integrity=t.integrity),t.referrerPolicy&&(n.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?n.credentials="include":t.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function u(t){if(t.ep)return;t.ep=!0;const n=g(t);fetch(t.href,n)}})();window.onload=()=>{let M=!1;const s={latitude:51.936389,longitude:7.650431},g=[3,6,12],u=document.querySelector("a-scene"),t=document.querySelector("[gps-new-camera]");t.setAttribute("far","100"),t.setAttribute("near","1"),t.setAttribute("fov","90");const n=document.createElement("div");n.id="distanceDisplay",document.body.appendChild(n);const a=document.createElement("div");a.id="compassContainer",document.body.appendChild(a);const f=document.createElement("div");f.id="compassArrow",f.innerText="â†‘",a.appendChild(f);const b=document.createElement("div");b.id="compassText",a.appendChild(b),t.addEventListener("gps-camera-update-position",i=>{const d=i.detail.position.latitude,r=i.detail.position.longitude,l=P(d,r,s.latitude,s.longitude);if(n.innerText=`Entfernung zum Ziel: ${Math.round(l)} m`,document.querySelectorAll("a-triangle").forEach(o=>o.remove()),g.forEach(o=>{const e=document.createElement("a-triangle");e.setAttribute("color","#00008B"),e.setAttribute("opacity","0.7");const c=L(d,r,s.latitude,s.longitude,o);e.setAttribute("gps-new-entity-place",{latitude:c.latitude,longitude:c.longitude}),e.setAttribute("look-at","#target"),u.appendChild(e)}),!M){const o=document.createElement("a-image");o.setAttribute("id","target"),o.setAttribute("src","./images/map-marker.png"),o.setAttribute("width","4"),o.setAttribute("height","4"),o.setAttribute("gps-new-entity-place",{latitude:s.latitude,longitude:s.longitude}),u.appendChild(o),M=!0}});function L(i,d,r,l,o){const e=i*Math.PI/180,c=d*Math.PI/180,h=r*Math.PI/180,A=l*Math.PI/180-c,w=Math.sin(A)*Math.cos(h),v=Math.cos(e)*Math.sin(h)-Math.sin(e)*Math.cos(h)*Math.cos(A),E=Math.atan2(w,v),m=6371e3,p=o,C=Math.asin(Math.sin(e)*Math.cos(p/m)+Math.cos(e)*Math.sin(p/m)*Math.cos(E)),I=c+Math.atan2(Math.sin(E)*Math.sin(p/m)*Math.cos(e),Math.cos(p/m)-Math.sin(e)*Math.sin(C));return{latitude:C*180/Math.PI,longitude:I*180/Math.PI}}function P(i,d,r,l){const e=Math.PI/180,c=(r-i)*e,h=(l-d)*e,y=Math.sin(c/2)**2+Math.cos(i*e)*Math.cos(r*e)*Math.sin(h/2)**2;return 6371e3*(2*Math.atan2(Math.sqrt(y),Math.sqrt(1-y)))}};
