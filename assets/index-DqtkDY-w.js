(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))a(e);new MutationObserver(e=>{for(const t of e)if(t.type==="childList")for(const i of t.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&a(i)}).observe(document,{childList:!0,subtree:!0});function s(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?t.credentials="include":e.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function a(e){if(e.ep)return;e.ep=!0;const t=s(e);fetch(e.href,t)}})();window.onload=()=>{let p=!1;const n={latitude:51.934548,longitude:7.653734},s=[3,6,12],a=document.querySelector("a-scene"),e=document.querySelector("[gps-new-camera]");e.setAttribute("far","50"),e.setAttribute("fov","90"),e.setAttribute("near","1");const t=document.createElement("div");t.id="distanceDisplay",document.body.appendChild(t);const i=document.createElement("div");i.id="compassContainer",document.body.appendChild(i);const c=document.createElement("div");c.id="compassArrow",c.innerText="↑",i.appendChild(c);const f=document.createElement("div");f.id="compassText",i.appendChild(f),e.addEventListener("gps-camera-update-position",d=>{const u=d.detail.position.latitude,r=d.detail.position.longitude,m=b(u,r,n.latitude,n.longitude);t.innerText=`Entfernung zum Ziel: ${Math.round(m)} m`;const h=A(u,r,n.latitude,n.longitude);if(M(h),document.querySelectorAll("a-triangle").forEach(o=>o.remove()),s.forEach(o=>{const l=document.createElement("a-triangle");l.setAttribute("color","#00008B"),l.setAttribute("opacity","0.7");const g=getIntermediateCoords(u,r,n.latitude,n.longitude,o);l.setAttribute("gps-new-entity-place",{latitude:g.latitude,longitude:g.longitude}),l.setAttribute("look-at","[gps-new-camera]"),a.appendChild(l)}),!p){const o=document.createElement("a-image");o.setAttribute("src","./images/map-marker.png"),o.setAttribute("width","4"),o.setAttribute("height","4"),o.setAttribute("look-at","[gps-new-camera]"),o.setAttribute("gps-new-entity-place",{latitude:n.latitude,longitude:n.longitude}),a.appendChild(o),p=!0}});function M(d){window.DeviceOrientationEvent&&window.addEventListener("deviceorientation",u=>{const r=u.alpha;if(r!==null){c.style.transform=`rotate(${-r}deg)`,f.innerText=`${Math.round(r)}°`;const m=Math.abs(r-d);m<=10||m>=350?c.style.color="green":c.style.color="black"}})}function b(d,u,r,m){const o=Math.PI/180,l=(r-d)*o,g=(m-u)*o,y=Math.sin(l/2)**2+Math.cos(d*o)*Math.cos(r*o)*Math.sin(g/2)**2;return 6371e3*(2*Math.atan2(Math.sqrt(y),Math.sqrt(1-y)))}};function A(p,n,s,a){const e=Math.PI/180,t=Math.sin((a-n)*e)*Math.cos(s*e),i=Math.cos(p*e)*Math.sin(s*e)-Math.sin(p*e)*Math.cos(s*e)*Math.cos((a-n)*e);return(Math.atan2(t,i)*(180/Math.PI)+360)%360}
