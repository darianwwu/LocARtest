(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))l(e);new MutationObserver(e=>{for(const t of e)if(t.type==="childList")for(const i of t.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&l(i)}).observe(document,{childList:!0,subtree:!0});function g(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?t.credentials="include":e.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function l(e){if(e.ep)return;e.ep=!0;const t=g(e);fetch(e.href,t)}})();window.onload=()=>{let m=!1;const o={latitude:51.934548,longitude:7.653734},g=[3,6,12],l=document.querySelector("a-scene"),e=document.querySelector("[gps-new-camera]");e.setAttribute("far","50"),e.setAttribute("fov","90"),e.setAttribute("near","1");const t=document.createElement("div");t.id="distanceDisplay",document.body.appendChild(t);const i=document.createElement("div");i.id="compassContainer",document.body.appendChild(i);const d=document.createElement("div");d.id="compassArrow",d.innerText="↑",i.appendChild(d);const f=document.createElement("div");f.id="compassText",i.appendChild(f),e.addEventListener("gps-camera-update-position",s=>{const a=s.detail.position.latitude,r=s.detail.position.longitude,u=A(a,r,o.latitude,o.longitude);t.innerText=`Entfernung zum Ziel: ${Math.round(u)} m`;const h=computeBearing(a,r,o.latitude,o.longitude);if(b(h),document.querySelectorAll("a-triangle").forEach(n=>n.remove()),g.forEach(n=>{const c=document.createElement("a-triangle");c.setAttribute("color","#00008B"),c.setAttribute("opacity","0.7");const p=getIntermediateCoords(a,r,o.latitude,o.longitude,n);c.setAttribute("gps-new-entity-place",{latitude:p.latitude,longitude:p.longitude}),c.setAttribute("look-at","[gps-new-camera]"),l.appendChild(c)}),!m){const n=document.createElement("a-image");n.setAttribute("src","./images/map-marker.png"),n.setAttribute("width","4"),n.setAttribute("height","4"),n.setAttribute("look-at","[gps-new-camera]"),n.setAttribute("gps-new-entity-place",{latitude:o.latitude,longitude:o.longitude}),l.appendChild(n),m=!0}});function b(s){window.DeviceOrientationEvent&&window.addEventListener("deviceorientation",a=>{const r=a.alpha;if(r!==null){d.style.transform=`rotate(${-r}deg)`,f.innerText=`${Math.round(r)}°`;const u=Math.abs(r-s);u<=10||u>=350?d.style.color="green":d.style.color="black"}})}function A(s,a,r,u){const n=Math.PI/180,c=(r-s)*n,p=(u-a)*n,y=Math.sin(c/2)**2+Math.cos(s*n)*Math.cos(r*n)*Math.sin(p/2)**2;return 6371e3*(2*Math.atan2(Math.sqrt(y),Math.sqrt(1-y)))}};
