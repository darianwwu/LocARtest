(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))n(t);new MutationObserver(t=>{for(const e of t)if(e.type==="childList")for(const o of e.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function i(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?e.credentials="include":t.crossOrigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function n(t){if(t.ep)return;t.ep=!0;const e=i(t);fetch(t.href,e)}})();window.onload=()=>{const c={latitude:51.935172,longitude:7.649701},r=document.querySelector("[gps-new-camera]");r.addEventListener("gps-camera-update-position",i=>{const n=i.detail.position,t=new THREE.Vector3;r.object3D.getWorldDirection(t);const e=Math.atan2(t.x,-t.z),o=d(n.latitude,n.longitude,e,5);let a=document.querySelector("a-entity[gltf-model]");a||(a=document.createElement("a-entity"),a.setAttribute("gltf-model","./car-arrow-glb/source/carArrow.glb"),a.setAttribute("scale","1 1 1"),document.querySelector("a-scene").appendChild(a)),a.setAttribute("gps-new-entity-place",{latitude:o.latitude,longitude:o.longitude});const s=u(o.latitude,o.longitude,c.latitude,c.longitude);a.setAttribute("rotation",`0 ${s} 0`)})};function d(c,r,i,n){const e=c*Math.PI/180,o=r*Math.PI/180,a=Math.asin(Math.sin(e)*Math.cos(n/6371e3)+Math.cos(e)*Math.sin(n/6371e3)*Math.cos(i)),s=o+Math.atan2(Math.sin(i)*Math.sin(n/6371e3)*Math.cos(e),Math.cos(n/6371e3)-Math.sin(e)*Math.sin(a));return{latitude:a*180/Math.PI,longitude:s*180/Math.PI}}function u(c,r,i,n){const t=c*Math.PI/180,e=i*Math.PI/180,o=(n-r)*Math.PI/180,a=Math.sin(o)*Math.cos(e),s=Math.cos(t)*Math.sin(e)-Math.sin(t)*Math.cos(e)*Math.cos(o);let l=Math.atan2(a,s);return l=l*180/Math.PI,(l+360)%360}
