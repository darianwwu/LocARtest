(function(){const c=document.createElement("link").relList;if(c&&c.supports&&c.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))g(t);new MutationObserver(t=>{for(const n of t)if(n.type==="childList")for(const a of n.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&g(a)}).observe(document,{childList:!0,subtree:!0});function i(t){const n={};return t.integrity&&(n.integrity=t.integrity),t.referrerPolicy&&(n.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?n.credentials="include":t.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function g(t){if(t.ep)return;t.ep=!0;const n=i(t);fetch(t.href,n)}})();document.addEventListener("DOMContentLoaded",()=>{console.log("DOM fully loaded and parsed");const u=document.getElementById("arrow"),c=document.getElementById("distanceText");u?console.log("Arrow model found in DOM"):console.error("Arrow model not found in DOM");const i={latitude:51.935918,longitude:7.650877};"geolocation"in navigator?(console.log("Geolocation is supported"),navigator.geolocation.watchPosition(o=>{const{latitude:r,longitude:e}=o.coords;console.log(`User position updated: lat=${r}, lon=${e}`),g(r,e),t(),n(r,e)},o=>console.error("Geolocation error:",o),{enableHighAccuracy:!0,maximumAge:0,timeout:5e3})):console.error("Geolocation not supported by this browser.");function g(o,r){const e=a(o,r,i.latitude,i.longitude);console.log(`Calculated bearing: ${e} degrees`),u.setAttribute("rotation",`0 ${e} 0`)}function t(o,r){console.log(`Updating arrow position: lat=${i.latitude}, lon=${i.longitude}`),u.setAttribute("gps-entity-place",`latitude: ${i.latitude}; longitude: ${i.longitude};`)}function n(o,r){const e=y(o,r,i.latitude,i.longitude);c.setAttribute("text","value",`${Math.round(e)} m`)}function a(o,r,e,M){const s=p=>p*Math.PI/180,m=p=>p*180/Math.PI,l=s(M-r),f=Math.sin(l)*Math.cos(s(e)),h=Math.cos(s(o))*Math.sin(s(e))-Math.sin(s(o))*Math.cos(s(e))*Math.cos(l);let d=m(Math.atan2(f,h));return d=(d+360)%360,console.log(`Bearing calculation result: ${d}`),d}function y(o,r,e,M){const s=L=>L*Math.PI/180,l=s(e-o),f=s(M-r),h=Math.sin(l/2)*Math.sin(l/2)+Math.cos(s(o))*Math.cos(s(e))*Math.sin(f/2)*Math.sin(f/2);return 6371*(2*Math.atan2(Math.sqrt(h),Math.sqrt(1-h)))*1e3}});
