(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))u(e);new MutationObserver(e=>{for(const t of e)if(t.type==="childList")for(const s of t.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&u(s)}).observe(document,{childList:!0,subtree:!0});function f(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?t.credentials="include":e.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function u(e){if(e.ep)return;e.ep=!0;const t=f(e);fetch(e.href,t)}})();window.onload=()=>{let m=!1;const o={latitude:51.934548,longitude:7.653734},f=[3,6,12],u=document.querySelector("a-scene"),e=document.querySelector("[gps-new-camera]");e.setAttribute("far","50"),e.setAttribute("fov","90"),e.setAttribute("near","1");const t=document.createElement("div");t.id="distanceDisplay",document.body.appendChild(t);const s=document.createElement("div");s.id="compassContainer",document.body.appendChild(s);const c=document.createElement("div");c.id="compassArrow",c.innerText="↑",s.appendChild(c);const g=document.createElement("div");g.id="compassText",s.appendChild(g),e.addEventListener("gps-camera-update-position",a=>{const d=a.detail.position.latitude,r=a.detail.position.longitude,l=b(d,r,o.latitude,o.longitude);if(t.innerText=`Entfernung zum Ziel: ${Math.round(l)} m`,y(targetBearing),document.querySelectorAll("a-triangle").forEach(n=>n.remove()),f.forEach(n=>{const i=document.createElement("a-triangle");i.setAttribute("color","#00008B"),i.setAttribute("opacity","0.7");const p=getIntermediateCoords(d,r,o.latitude,o.longitude,n);i.setAttribute("gps-new-entity-place",{latitude:p.latitude,longitude:p.longitude}),i.setAttribute("look-at","[gps-new-camera]"),u.appendChild(i)}),!m){const n=document.createElement("a-image");n.setAttribute("src","./images/map-marker.png"),n.setAttribute("width","4"),n.setAttribute("height","4"),n.setAttribute("look-at","[gps-new-camera]"),n.setAttribute("gps-new-entity-place",{latitude:o.latitude,longitude:o.longitude}),u.appendChild(n),m=!0}});function y(a){window.DeviceOrientationEvent&&window.addEventListener("deviceorientation",d=>{const r=d.alpha;if(r!==null){c.style.transform=`rotate(${-r}deg)`,g.innerText=`${Math.round(r)}°`;const l=Math.abs(r-a);l<=10||l>=350?c.style.color="green":c.style.color="black"}})}function b(a,d,r,l){const i=Math.PI/180,p=(r-a)*i,A=(l-d)*i,h=Math.sin(p/2)**2+Math.cos(a*i)*Math.cos(r*i)*Math.sin(A/2)**2;return 6371e3*(2*Math.atan2(Math.sqrt(h),Math.sqrt(1-h)))}};
