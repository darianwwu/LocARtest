(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))u(t);new MutationObserver(t=>{for(const n of t)if(n.type==="childList")for(const c of n.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&u(c)}).observe(document,{childList:!0,subtree:!0});function s(t){const n={};return t.integrity&&(n.integrity=t.integrity),t.referrerPolicy&&(n.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?n.credentials="include":t.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function u(t){if(t.ep)return;t.ep=!0;const n=s(t);fetch(t.href,n)}})();document.addEventListener("DOMContentLoaded",()=>{console.log("DOM fully loaded and parsed");const d=document.getElementById("arrow"),a=document.getElementById("distance-display");d?console.log("Arrow model found in DOM"):console.error("Arrow model not found in DOM");const s={latitude:51.935918,longitude:7.650877};"geolocation"in navigator?(console.log("Geolocation is supported"),navigator.geolocation.watchPosition(o=>{const{latitude:r,longitude:e}=o.coords;console.log(`User position updated: lat=${r}, lon=${e}`),u(r,e),t(),n(r,e)},o=>console.error("Geolocation error:",o),{enableHighAccuracy:!0,maximumAge:0,timeout:5e3})):console.error("Geolocation not supported by this browser.");function u(o,r){const e=c(o,r,s.latitude,s.longitude);console.log(`Calculated bearing: ${e} degrees`),d.setAttribute("rotation",`0 ${e} 0`)}function t(o,r){console.log(`Updating arrow position: lat=${s.latitude}, lon=${s.longitude}`),d.setAttribute("gps-entity-place",`latitude: ${s.latitude}; longitude: ${s.longitude};`)}function n(o,r){const e=y(o,r,s.latitude,s.longitude);console.log(`Distance to target: ${e} meters`),a.innerText=`Distance: ${e.toFixed(2)} m`}function c(o,r,e,p){const i=M=>M*Math.PI/180,g=M=>M*180/Math.PI,l=i(p-r),f=Math.sin(l)*Math.cos(i(e)),m=Math.cos(i(o))*Math.sin(i(e))-Math.sin(i(o))*Math.cos(i(e))*Math.cos(l);let h=g(Math.atan2(f,m));return h=(h+360)%360,console.log(`Bearing calculation result: ${h}`),h}function y(o,r,e,p){const g=(e-o)*(Math.PI/180),l=(p-r)*(Math.PI/180),f=Math.sin(g/2)*Math.sin(g/2)+Math.cos(o*(Math.PI/180))*Math.cos(e*(Math.PI/180))*Math.sin(l/2)*Math.sin(l/2);return 6371e3*(2*Math.atan2(Math.sqrt(f),Math.sqrt(1-f)))}});
