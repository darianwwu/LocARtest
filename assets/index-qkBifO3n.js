(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))c(e);new MutationObserver(e=>{for(const o of e)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&c(s)}).observe(document,{childList:!0,subtree:!0});function i(e){const o={};return e.integrity&&(o.integrity=e.integrity),e.referrerPolicy&&(o.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?o.credentials="include":e.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function c(e){if(e.ep)return;e.ep=!0;const o=i(e);fetch(e.href,o)}})();window.onload=()=>{let r=!1,t=!1;window.addEventListener("deviceorientation",s=>{s.alpha!==null&&(t=!0)});const i={latitude:51.935502,longitude:7.652093},c=[3,6,9,12,15],e=document.querySelector("a-scene");document.querySelector("[gps-new-camera]").addEventListener("gps-camera-update-position",s=>{if(!t){console.log("Warte auf vollstÃ¤ndige Sensordaten...");return}const l=s.detail.position.latitude,f=s.detail.position.longitude;if(M("GPS-Position aktualisiert"),document.querySelectorAll("a-circle").forEach(n=>n.parentNode.removeChild(n)),c.forEach(n=>{const a=document.createElement("a-circle");a.setAttribute("radius","0.5"),a.setAttribute("color","#00008B"),a.setAttribute("opacity","0.7");const d=y(l,f,i.latitude,i.longitude,n);a.setAttribute("gps-new-entity-place",{latitude:d.latitude,longitude:d.longitude}),e.appendChild(a)}),!r){const n=document.createElement("a-image");n.setAttribute("src","./images/map-marker.png"),n.setAttribute("width","4"),n.setAttribute("height","4"),n.setAttribute("look-at","[gps-new-camera]"),n.setAttribute("gps-new-entity-place",{latitude:i.latitude,longitude:i.longitude}),e.appendChild(n),r=!0}})};function y(r,t,i,c,e){const o=r*Math.PI/180,s=t*Math.PI/180,l=i*Math.PI/180,p=c*Math.PI/180-s,n=Math.sin(p)*Math.cos(l),a=Math.cos(o)*Math.sin(l)-Math.sin(o)*Math.cos(l)*Math.cos(p),d=Math.atan2(n,a),u=6371e3,h=e,m=Math.asin(Math.sin(o)*Math.cos(h/u)+Math.cos(o)*Math.sin(h/u)*Math.cos(d)),g=s+Math.atan2(Math.sin(d)*Math.sin(h/u)*Math.cos(o),Math.cos(h/u)-Math.sin(o)*Math.sin(m));return{latitude:m*180/Math.PI,longitude:g*180/Math.PI}}function M(r){const t=document.createElement("div");t.style.position="fixed",t.style.top="20px",t.style.left="50%",t.style.transform="translateX(-50%)",t.style.padding="10px 20px",t.style.backgroundColor="rgba(0, 0, 0, 0.7)",t.style.color="white",t.style.fontSize="14px",t.style.borderRadius="5px",t.style.zIndex="9999",t.innerText=r,document.body.appendChild(t),setTimeout(()=>{t.remove()},1e3)}
